# AI算命网站部署指南

## 📁 数据集部署说明

### ✅ 数据集文件位置
数据集文件位于 `backend/data/` 目录下：
- `bazi-dataset.json` - 八字命理数据集
- `fortune-dataset.json` - 算命数据集

### 🚀 部署步骤

#### 1. 本地开发环境
```bash
# 项目结构
ai-fortune-website/
├── backend/
│   ├── data/              # 数据集文件
│   │   ├── bazi-dataset.json
│   │   └── fortune-dataset.json
│   ├── src/
│   ├── package.json
│   └── .env
├── frontend/
└── README.md
```

#### 2. 服务器部署
```bash
# 1. 上传整个项目到服务器
scp -r ai-fortune-username@server:/path/to/ai-fortune-website

# 2. 进入后端目录
cd ai-fortune-website/backend

# 3. 安装依赖
npm install

# 4. 配置环境变量
cp .env.example .env
# 编辑 .env 文件，设置正确的API密钥

# 5. 启动服务
npm run dev
```

#### 3. 数据集处理
- ✅ **本地数据集**：已包含在项目中，无需额外下载
- ✅ **自动加载**：系统会优先从本地加载数据集
- ✅ **备用方案**：如果本地数据集不存在，会尝试从远程加载

### 🔧 数据集配置

#### 本地数据集格式
```json
[
  {
    "id": 1,
    "category": "五行运势",
    "keywords": ["五行", "金木水火土"],
    "content": "五行平衡是运势稳定的基础..."
  }
]
```

#### 数据集加载优先级
1. **本地数据集** (`backend/data/`)
2. **远程数据集** (ModelScope API)
3. **默认数据集** (内置备用数据)

### 📋 部署检查清单

- [ ] 确保数据集文件存在
- [ ] 检查环境变量配置
- [ ] 验证API密钥有效性
- [ ] 测试数据集加载
- [ ] 确认服务正常运行

### 🛠️ 故障排除

#### 数据集加载失败
1. 检查数据集文件是否存在
2. 验证JSON格式是否正确
3. 检查文件权限
4. 查看日志输出

#### API连接问题
1. 验证网络连接
2. 检查API密钥
3. 确认端点地址
4. 查看错误日志

### 💡 最佳实践

1. **定期备份**：定期备份数据集文件
2. **版本控制**：将数据集文件纳入版本控制
3. **监控日志**：关注数据集加载日志
4. **性能优化**：考虑数据集缓存机制

### 📊 数据集统计

| 数据集名称 | 文件大小 | 记录数 | 类别 |
|-----------|---------|--------|------|
| bazi-dataset.json | ~2KB | 8 | 八字命理 |
| fortune-dataset.json | ~3KB | 8 | 算命综合 |

---

**注意**：部署时确保包含所有数据集文件，这是系统正常运行的关键组件。