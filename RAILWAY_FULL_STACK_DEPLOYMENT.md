# Railway å…¨æ ˆéƒ¨ç½²æŒ‡å—

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

æœ¬æŒ‡å—å°†æŒ‡å¯¼ä½ å°† AI å åœç½‘ç«™å®Œæ•´éƒ¨ç½²åˆ° Railway å¹³å°ï¼ŒåŒ…æ‹¬å‰ç«¯é™æ€æ–‡ä»¶å’Œåç«¯ API æœåŠ¡ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-fortune-website/
â”œâ”€â”€ dist/                    # é¢„æ„å»ºçš„å‰ç«¯é™æ€æ–‡ä»¶
â”œâ”€â”€ backend/                 # åç«¯ API æœåŠ¡
â”‚   â”œâ”€â”€ src/server.ts        # åç«¯ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json         # åç«¯ä¾èµ–
â”‚   â””â”€â”€ dist/server.js       # ç¼–è¯‘åçš„åç«¯æ–‡ä»¶
â”œâ”€â”€ start-railway.js         # Railway å¯åŠ¨è„šæœ¬
â”œâ”€â”€ railway-full-stack.toml  # Railway é…ç½®
â”œâ”€â”€ package.json            # æ ¹ç›®å½•ä¾èµ–
â””â”€â”€ frontend/               # å‰ç«¯æºç 
```

## ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: å‡†å¤‡ Railway é¡¹ç›®

1. ç™»å½• [Railway](https://railway.app/)
2. åˆ›å»ºæ–°çš„é¡¹ç›®
3. è¿æ¥ä½ çš„ GitHub ä»“åº“

### æ­¥éª¤ 2: é…ç½®éƒ¨ç½²

1. **é€‰æ‹©éƒ¨ç½²æ–¹å¼**:
   - é€‰é¡¹ A: éƒ¨ç½²æ•´ä¸ªä»“åº“ï¼ˆæ¨èï¼‰
   - é€‰é¡¹ B: ä»…éƒ¨ç½² backend ç›®å½•

2. **è®¾ç½®ç¯å¢ƒå˜é‡**:
   ```
   NODE_ENV=production
   PORT=10000
   ```

3. **é…ç½®æ„å»ºè®¾ç½®**ï¼ˆå¦‚æœé€‰æ‹©éƒ¨åˆ†éƒ¨ç½²ï¼‰:
   ```
   Root Directory: /
   Build Command: npm run build
   Start Command: npm run start
   ```

### æ­¥éª¤ 3: Railway é…ç½®æ–‡ä»¶

é¡¹ç›®å·²åŒ…å«ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š

#### `railway-full-stack.toml`
```toml
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "node start-railway.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[build.nixpacks]
buildCommand = "cd backend && npm install"

[environments.production]
NODE_ENV = "production"
PORT = "10000"
```

#### `start-railway.js`
- å¯åŠ¨ Express æœåŠ¡å™¨
- æœåŠ¡å‰ç«¯é™æ€æ–‡ä»¶
- ç®¡ç†åç«¯ API æœåŠ¡
- å¤„ç† SPA è·¯ç”±

## ğŸš€ éƒ¨ç½²æµç¨‹

### è‡ªåŠ¨éƒ¨ç½²æµç¨‹

1. **Railway æ£€æµ‹ä»£ç å˜æ›´** â†’ è‡ªåŠ¨å¼€å§‹æ„å»º
2. **æ‰§è¡Œ `npm run build`** â†’ å‡†å¤‡é¡¹ç›®
3. **æ‰§è¡Œ `npm run start`** â†’ å¯åŠ¨æœåŠ¡
4. **å¯åŠ¨è„šæœ¬å¤„ç†**:
   - æ„å»ºåç«¯ TypeScript
   - å¯åŠ¨åç«¯ API æœåŠ¡
   - æœåŠ¡å‰ç«¯é™æ€æ–‡ä»¶

### æœåŠ¡æ¶æ„

```
ç”¨æˆ·è¯·æ±‚ â†’ Railway (Express)
                    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   å‰ç«¯é™æ€æ–‡ä»¶  â”‚  â† / (æ ¹è·¯å¾„)
            â”‚  (dist/*)     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   åç«¯ API    â”‚  â† /api/* 
            â”‚ (Node.js)     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ModelScope   â”‚  â† AI æ¨¡å‹
            â”‚  AI æœåŠ¡      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ åŠŸèƒ½ç‰¹æ€§

### å‰ç«¯æœåŠ¡
- âœ… é™æ€æ–‡ä»¶æ‰˜ç®¡
- âœ… SPA è·¯ç”±æ”¯æŒ
- âœ… èµ„æºä¼˜åŒ–
- âœ… é”™è¯¯å¤„ç†

### åç«¯æœåŠ¡
- âœ… AI å åœ API
- âœ… ModelScope é›†æˆ
- âœ… MCP å·¥å…·æ”¯æŒ
- âœ… è‡ªåŠ¨é‡å¯æœºåˆ¶

### ä»£ç†åŠŸèƒ½
- âœ… CORS é…ç½®
- âœ… è¯·æ±‚æ—¥å¿—
- âœ… é”™è¯¯å¤„ç†
- âœ… å¥åº·æ£€æŸ¥

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—
- **Railway æ§åˆ¶å°**: é¡¹ç›® â†’ éƒ¨ç½² â†’ æŸ¥çœ‹æ—¥å¿—
- **å®æ—¶ç›‘æ§**: Railway å®æ—¶æ—¥å¿—æµ

### å…³é”®æ—¥å¿—ä¿¡æ¯
```
ğŸ‰ AI Fortune Website running on port 10000
ğŸŒ Frontend: https://your-app.railway.app
ğŸ”— Backend API: https://your-app.railway.app/api
ğŸš€ Starting AI Fortune Backend Service...
```

## ğŸŒ è®¿é—®æ–¹å¼

### ç”¨æˆ·è®¿é—®
- **ä¸»ç½‘ç«™**: `https://your-app.railway.app`
- **API ç«¯ç‚¹**: `https://your-app.railway.app/api/*`

### æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨æœ¬åœ°æœåŠ¡
npm run dev

# è®¿é—®åœ°å€
# å‰ç«¯: http://localhost:10000
# API: http://localhost:10000/api
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥**
   - æ£€æŸ¥ package.json è„šæœ¬
   - éªŒè¯ç¯å¢ƒå˜é‡è®¾ç½®
   - æŸ¥çœ‹æ„å»ºæ—¥å¿—

2. **API æ— æ³•è®¿é—®**
   - æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
   - éªŒè¯ CORS é…ç½®
   - ç¡®è®¤ç«¯å£è®¾ç½®

3. **å‰ç«¯è·¯ç”±é—®é¢˜**
   - ç¡®è®¤ dist ç›®å½•å­˜åœ¨
   - æ£€æŸ¥ SPA é…ç½®
   - éªŒè¯é™æ€æ–‡ä»¶è·¯å¾„

### é‡å¯æœåŠ¡
- **Railway æ§åˆ¶å°**: é¡¹ç›® â†’ é‡å¯
- **è‡ªåŠ¨é‡å¯**: é…ç½®äº†æ•…éšœæ¢å¤æœºåˆ¶

## ğŸ“ˆ ä¼˜åŠ¿

### ç›¸æ¯” Vercel
- âœ… å®Œæ•´å‰åç«¯ä¸€ä½“åŒ–
- âœ… æ— éœ€å¤æ‚æ„å»ºé…ç½®
- âœ… æ›´çµæ´»çš„æœåŠ¡å™¨ç¯å¢ƒ
- âœ… å†…ç½®æ•°æ®åº“æ”¯æŒ
- âœ… æ›´å¥½çš„ä¸­å›½è®¿é—®é€Ÿåº¦

### æ€§èƒ½ä¼˜åŒ–
- ğŸ”¥ CDN åŠ é€Ÿ
- ğŸ”¥ æ™ºèƒ½ç¼“å­˜
- ğŸ”¥ èµ„æºå‹ç¼©
- ğŸ”¥ å¹¶å‘å¤„ç†

## ğŸ¯ ä¸‹ä¸€æ­¥

éƒ¨ç½²æˆåŠŸåï¼Œä½ å¯ä»¥ï¼š

1. **æµ‹è¯•åŠŸèƒ½**: è®¿é—®ç½‘ç«™ï¼Œæµ‹è¯• AI å åœåŠŸèƒ½
2. **è‡ªå®šä¹‰åŸŸå**: é…ç½®è‡ªå·±çš„åŸŸå
3. **æ•°æ®åº“ä¼˜åŒ–**: è€ƒè™‘æ·»åŠ æ•°æ®åº“æ”¯æŒ
4. **ç›‘æ§é›†æˆ**: æ·»åŠ æ€§èƒ½ç›‘æ§
5. **å¤‡ä»½ç­–ç•¥**: è®¾ç½®è‡ªåŠ¨å¤‡ä»½

---

## ğŸ’¡ éƒ¨ç½²æˆåŠŸæ ‡å¿—

å½“çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—æ—¶ï¼Œè¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼š

```
ğŸ‰ AI Fortune Website running on port 10000
ğŸŒ Frontend: https://ai-fortune-website-production.up.railway.app
ğŸ”— Backend API: https://ai-fortune-website-production.up.railway.app/api
âœ… Backend build successful, starting server...
ğŸš€ AI Fortune Backend Service started
```

ç°åœ¨ä½ çš„ AI å åœç½‘ç«™å·²ç»å®Œæ•´éƒ¨ç½²åˆ° Railwayï¼ğŸ‰