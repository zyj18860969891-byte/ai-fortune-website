// æµ‹è¯•è¿‡æ»¤ç®—æ³•
const testResponse = `1. **æ‹†è§£ç”¨æˆ·è¯·æ±‚ï¼š**
ç”¨æˆ·è¯¢é—®1996å¹´2æœˆ10æ—¥çš„å…«å­—å‘½ç†åˆ†æ

2. **åˆ†æç”¨æˆ·è¾“å…¥ï¼š**
éœ€è¦è®¡ç®—å…«å­—å¹¶æä¾›å‘½ç†åˆ†æ

ğŸŒŸ å…«å­—åˆ†æç»“æœ
ä¸™å­ åºšå¯… ä¸™å­ ä¸™ç”³

ğŸ’ª æ€§æ ¼ç‰¹ç‚¹
æ‚¨æ˜¯ä¸€ä¸ªçƒ­æƒ…å¼€æœ—çš„äºº...`;

console.log('åŸå§‹å“åº”:');
console.log(testResponse);
console.log('\n--- è¿‡æ»¤å ---');

let cleanResponse = testResponse.trim().replace(/^['"]|['"]$/g, '');

// å¼ºåŒ–æ€è€ƒè¿‡ç¨‹è¿‡æ»¤ - æ›´å…¨é¢çš„æ¨¡å¼
const thinkingPatterns = [
  // æ•°å­—ç¼–å·çš„æ€è€ƒè¿‡ç¨‹
  /^\d+\.\s*\*\*æ‹†è§£[^*]*\*\*[\s\S]*?(?=^\d+\.|ğŸŒŸ|ğŸ’ª|ğŸ’¡|ğŸŒ¸|ğŸ‘‹|$)/gm,
  /^\d+\.\s*\*\*åˆ†æ[^*]*\*\*[\s\S]*?(?=^\d+\.|ğŸŒŸ|ğŸ’ª|ğŸ’¡|ğŸŒ¸|ğŸ‘‹|$)/gm,
  /^\d+\.\s*\*\*æ ¸å¿ƒ[^*]*\*\*[\s\S]*?(?=^\d+\.|ğŸŒŸ|ğŸ’ª|ğŸ’¡|ğŸŒ¸|ğŸ‘‹|$)/gm,
  /^\d+\.\s*\*\*è§’è‰²[^*]*\*\*[\s\S]*?(?=^\d+\.|ğŸŒŸ|ğŸ’ª|ğŸ’¡|ğŸŒ¸|ğŸ‘‹|$)/gm,
  /^\d+\.\s*\*\*æ²Ÿé€š[^*]*\*\*[\s\S]*?(?=^\d+\.|ğŸŒŸ|ğŸ’ª|ğŸ’¡|ğŸŒ¸|ğŸ‘‹|$)/gm,
  /^\d+\.\s*\*\*å›ç­”[^*]*\*\*[\s\S]*?(?=^\d+\.|ğŸŒŸ|ğŸ’ª|ğŸ’¡|ğŸŒ¸|ğŸ‘‹|$)/gm,
  
  // æ˜Ÿå·æ ‡è®°çš„æ€è€ƒè¿‡ç¨‹
  /\*\*æ‹†è§£[^*]*\*\*[\s\S]*?(?=\*\*|$)/g,
  /\*\*åˆ†æ[^*]*\*\*[\s\S]*?(?=\*\*|$)/g,
  /\*\*æ ¸å¿ƒ[^*]*\*\*[\s\S]*?(?=\*\*|$)/g,
  /\*\*è§’è‰²[^*]*\*\*[\s\S]*?(?=\*\*|$)/g,
  /\*\*æ²Ÿé€š[^*]*\*\*[\s\S]*?(?=\*\*|$)/g,
  /\*\*å›ç­”[^*]*\*\*[\s\S]*?(?=\*\*|$)/g,
  
  // åŒ…å«æ€è€ƒå…³é”®è¯çš„è¡Œ
  /^[^*]*æ‹†è§£è¯·æ±‚[^*]*$/gm,
  /^[^*]*åˆ†æç”¨æˆ·è¾“å…¥[^*]*$/gm,
  /^[^*]*æ ¸å¿ƒè¦æ±‚[^*]*$/gm,
  /^[^*]*è§’è‰²ç‰¹å¾[^*]*$/gm,
  /^[^*]*æ²Ÿé€šé£æ ¼[^*]*$/gm,
  /^[^*]*å›ç­”è¦æ±‚[^*]*$/gm,
  /^[^*]*äººè®¾[^*]*$/gm,
  /^[^*]*æˆ‘æ˜¯ä¸€ä½[^*]*$/gm,
  /^[^*]*ä¸“ä¸šAIå‘½ç†å¸ˆ[^*]*$/gm,
  
  // å†…éƒ¨æ ‡è®°
  /^[^*]*ï¼ˆå†…éƒ¨ï¼Œä¸å±•ç¤ºï¼‰[^*]*$/gm,
  /^[^*]*å¿ƒç®—æˆ–å¿«é€ŸæŸ¥è¯¢[^*]*$/gm,
  /^[^*]*æˆ‘éœ€è¦[^*]*$/gm,
  /^[^*]*å¿«é€ŸæŸ¥è¯¢æ˜¾ç¤º[^*]*$/gm,
  /^[^*]*å¿«é€ŸæŸ¥è¯¢[^*]*$/gm
];

for (const pattern of thinkingPatterns) {
  cleanResponse = cleanResponse.replace(pattern, '');
}

console.log(cleanResponse);

// æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ€è€ƒè¿‡ç¨‹æ®‹ç•™
const hasThinkingProcess = /\*\*æ‹†è§£|\*\*åˆ†æ|^\d+\.\s*\*\*|æ‹†è§£è¯·æ±‚|åˆ†æç”¨æˆ·è¾“å…¥/.test(cleanResponse);
console.log('\n--- æ£€æŸ¥ç»“æœ ---');
console.log('æ˜¯å¦è¿˜æœ‰æ€è€ƒè¿‡ç¨‹æ®‹ç•™:', hasThinkingProcess ? 'âŒ æ˜¯' : 'âœ… å¦');