# ç½‘ç»œè¿æ¥é—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ” é—®é¢˜åˆ†æ

### ä¸»è¦é—®é¢˜
1. **ENOTFOUND api.modelscope.cn** - Railway ç½‘ç»œè¿æ¥å¤±è´¥
2. **ä½¿ç”¨äº†é”™è¯¯çš„å¯åŠ¨æ–‡ä»¶** - Railway ä»åœ¨ä½¿ç”¨ `start-railway-simple.js`
3. **ç½‘ç»œè¶…æ—¶** - API è°ƒç”¨è¶…æ—¶

### æ ¹æœ¬åŸå› 
1. Railway ç½‘ç»œé…ç½®å¯èƒ½é™åˆ¶äº†å¤–éƒ¨ API è°ƒç”¨
2. å¯åŠ¨æ–‡ä»¶é€‰æ‹©ä¸æ­£ç¡®
3. ç¼ºå°‘é€‚å½“çš„è¯·æ±‚å¤´å’Œè¶…æ—¶è®¾ç½®

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. åˆ›å»ºä¿®å¤ç‰ˆæœ¬
- **æ–‡ä»¶**: `start-railway-fixed.js`
- **æ”¹è¿›**: 
  - æ·»åŠ äº†å®Œæ•´çš„é”™è¯¯å¤„ç†
  - æ”¹è¿›äº†ç½‘ç»œè¯·æ±‚é…ç½®
  - æ·»åŠ äº†è¶…æ—¶è®¾ç½®
  - ä¼˜åŒ–äº†è¯·æ±‚å¤´

### 2. æ›´æ–° Railway é…ç½®
- **æ–‡ä»¶**: `railway-backend-only.toml`
- **æ›´æ”¹**: 
  - å¼ºåˆ¶ä½¿ç”¨ `start-railway-fixed.js`
  - è®¾ç½® Node.js ç‰ˆæœ¬ä¸º 18
  - ä¼˜åŒ–æ„å»ºé…ç½®

### 3. ç½‘ç»œè¯·æ±‚ä¼˜åŒ–
```javascript
// æ”¹è¿›çš„è¯·æ±‚é…ç½®
const response = await axios.post(
  'https://api.modelscope.cn/v1/chat/completions',
  requestBody,
  {
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json',
      'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
    },
    timeout: 30000,
    validateStatus: function (status) {
      return status >= 200 && status < 300;
    }
  }
);
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. ç­‰å¾… Railway è‡ªåŠ¨éƒ¨ç½²
- Railway åº”è¯¥å·²ç»æ£€æµ‹åˆ°ä»£ç å˜æ›´
- ç­‰å¾… 2-5 åˆ†é’Ÿå®Œæˆéƒ¨ç½²

### 2. æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
```bash
# è®¿é—®å¥åº·æ£€æŸ¥
https://your-app.railway.app/health

# æ£€æŸ¥ç¯å¢ƒå˜é‡
https://your-app.railway.app/api/env
```

### 3. æµ‹è¯• AI åŠŸèƒ½
```bash
# æµ‹è¯• AI å åœ
curl -X POST https://your-app.railway.app/api/fortune/chat \
  -H "Content-Type: application/json" \
  -d '{
    "type": "bazi",
    "question": "è¯·åˆ†ææˆ‘çš„å…«å­—å‘½ç†",
    "context": [
      {"type": "user", "content": "æˆ‘çš„å‡ºç”Ÿæ—¥æœŸæ˜¯ 1996.02.10"}
    ],
    "sessionId": "test"
  }'
```

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

ç¡®ä¿ Railway ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®ï¼š
```bash
MODELSCOPE_TOKEN=ms-bf1291c1-c1ed-464c-b8d8-162fdee96180
MODELSCOPE_MODEL_ID=Qwen/Qwen3-235B-A22B-Instruct-2507
NODE_ENV=production
PORT=10000
```

## ğŸ¯ é¢„æœŸç»“æœ

### æˆåŠŸæ—¶
- âœ… å¥åº·æ£€æŸ¥è¿”å› 200
- âœ… ç¯å¢ƒå˜é‡æ£€æŸ¥æ˜¾ç¤º ModelScope å·²é…ç½®
- âœ… AI åŠŸèƒ½æµ‹è¯•è¿”å›çœŸå®çš„å…«å­—å‘½ç†åˆ†æ
- âœ… ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œæ—  ENOTFOUND é”™è¯¯

### è°ƒè¯•ä¿¡æ¯
æœåŠ¡å™¨æ—¥å¿—åº”è¯¥æ˜¾ç¤ºï¼š
- ğŸš€ å¼€å§‹è°ƒç”¨ ModelScope API
- âœ… API è°ƒç”¨æˆåŠŸ
- âœ… AI ç”Ÿæˆç»“æœ
- ğŸ¯ æå–çš„å‡ºç”Ÿæ—¥æœŸ

## ğŸš¨ æ•…éšœæ’é™¤

### 1. å¦‚æœä»ç„¶æœ‰ç½‘ç»œé—®é¢˜
1. æ£€æŸ¥ Railway æ§åˆ¶å°çš„æ„å»ºæ—¥å¿—
2. ç¡®è®¤ ModelScope API æœåŠ¡çŠ¶æ€
3. å°è¯•ä½¿ç”¨ä»£ç†æˆ–ä¸åŒçš„ API ç«¯ç‚¹

### 2. å¦‚æœ AI åŠŸèƒ½ä¸å·¥ä½œ
1. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
2. æŸ¥çœ‹ Railway æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤ ModelScope Token æ˜¯å¦æœ‰æ•ˆ

### 3. å¦‚æœå‰ç«¯è¿æ¥é—®é¢˜
1. æ£€æŸ¥ API é‡å†™é…ç½®
2. ç¡®è®¤ Railway åŸŸåæ­£ç¡®
3. éªŒè¯ç«¯å£é…ç½®

## ğŸ“Š æŠ€æœ¯æ”¹è¿›

| æ–¹é¢ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| ç½‘ç»œè¿æ¥ | ENOTFOUND é”™è¯¯ | æ”¹è¿›çš„è¯·æ±‚é…ç½® |
| é”™è¯¯å¤„ç† | åŸºç¡€ | å®Œæ•´çš„é”™è¯¯å¤„ç† |
| è¶…æ—¶è®¾ç½® | æ—  | 30ç§’è¶…æ—¶ |
| è¯·æ±‚å¤´ | ç®€å• | å®Œæ•´çš„è¯·æ±‚å¤´ |
| å¯åŠ¨æ–‡ä»¶ | é”™è¯¯æ–‡ä»¶ | æ­£ç¡®çš„ä¿®å¤ç‰ˆæœ¬ |

## ğŸ‰ ä¸‹ä¸€æ­¥

1. **ç­‰å¾… Railway éƒ¨ç½²å®Œæˆ**
2. **æµ‹è¯•ç½‘ç»œè¿æ¥**ç¡®ä¿ ENOTFOUND é”™è¯¯å·²è§£å†³
3. **éªŒè¯ AI åŠŸèƒ½**ç¡®ä¿è¿”å›çœŸå®åˆ†æ
4. **ç›‘æ§æ—¥å¿—**ç¡®ä¿æ— é”™è¯¯

è¿™ä¸ªä¿®å¤ç‰ˆæœ¬åº”è¯¥èƒ½å¤Ÿè§£å†³ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œå¹¶æä¾›ç¨³å®šçš„ AI å…«å­—å‘½ç†åˆ†æåŠŸèƒ½ã€‚